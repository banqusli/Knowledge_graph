'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = rdfTranslator;
var request = require('request');
var noop = require('node-noop').noop;
var validUrl = require('valid-url');

function rdfTranslator(str, source, target) {
  var callback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : noop;

  var err = null;
  if (!str) err = Error('Nothing to convert: null or empty string');
  if (!source || !target) err = Error('No source or target format are specified');

  return new Promise(function (resolve, reject) {
    if (err) {
      callback(err);
      return reject(err);
    }

    var suffix = validUrl.isUri(str) ? str : 'content';
    var url = 'http://rdf-translator.appspot.com/convert/' + source + '/' + target + '/' + suffix;

    request.post({
      url: url,
      form: {
        content: str
      }
    }, function (err, response, body) {
      if (!err && response.statusCode != 200) err = response.statusCode;

      callback(err, body);
      if (err) reject(err);else resolve(body);
    });
  });
}

module.exports = rdfTranslator;
module.exports = exports['default'];
